import control.matlab as ctrl
import matplotlib.pyplot as plt
import numpy as np

# 8,15 V
# 2,73V

M1_2_79 = [00.000,01.047,03.141,04.188,04.712,05.759,06.283,06.283,06.283,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806]######

# M2_2_79 = [00.000,u4.879,03.141,04.188,05.235,05.759,06.283,06.283,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,07.330,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,07.330,06.806,06.806,06.806,07.330,06.806,06.806,06.806,07.330,07.330,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.283,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,07.330,07.330,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,06.806,06.806,06.806,06.806,06.806,06.806,06.806,06.806,07.330,07.330]
# Tensão de 8,15V

M1_4_00= [00.000,02.094,04.188,05.759,07.853,08.377,08.377,09.424,09.424,09.424,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            10.471,09.948,09.948,09.948,09.948,09.948,10.471,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,10.471,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,10.471,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,10.471,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            10.471,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,
            09.948,09.948,09.424,09.948,10.471,09.424,09.948,09.948,09.948,09.948,
            09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948,09.948]

M2_4_00 = [00.000,01.570,04.188,06.283,07.330,08.377,08.901,09.424,09.424,09.948,
            09.948,09.948,09.948,10.471,09.948,09.948,10.471,09.948,09.948,09.948,
            10.471,09.948,10.471,09.948,10.471,09.948,09.948,10.471,09.948,10.471,
            09.948,10.471,09.948,10.471,09.948,10.471,09.948,10.471,10.471,09.948,
            10.471,09.948,10.471,09.948,10.471,09.948,09.948,09.948,10.471,10.471,
            09.948,09.948,10.471,09.948,10.471,10.471,09.948,10.471,09.948,09.948,
            10.471,09.948,09.948,10.471,09.948,10.471,09.948,10.471,09.948,09.948,
            10.471,09.948,10.471,09.948,09.948,09.948,09.948,10.471,09.948,09.948,
            09.948,09.948,09.948,10.471,09.948,09.948,10.471,09.948,09.948,10.471,
            09.948,09.948,10.471,09.948,09.948,10.471,09.948,09.948,10.471,09.948,
            09.948,10.471,09.948,09.948,10.471,10.471,09.948,09.948,09.948,10.471,
            10.471,09.948,09.948,09.948,10.471,10.471,09.948,10.471,09.948,09.948,
            10.471,09.948,09.948,10.471,10.471,09.948,10.471,09.948,10.471,09.948,
            10.471,09.948,10.471,09.948,10.471,09.948,09.948,09.948,09.948,10.471,
            09.948,09.948,09.948,09.948,10.471,09.948,09.948,10.471,10.471,09.948]


# 8,12V
# 5.5V
M1_5_59 = [00.000,02.617,05.759,08.901,10.471,11.519,12.566,13.089,13.613,14.137,14.137,14.137,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,15.184,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.137,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.137,14.660,14.660,14.660,15.184,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.137,14.660,14.660,14.137,14.660,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.137,14.660,14.660,14.137,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.660,14.137,14.660]######

######
M2_5_59 = [00.000,02.617,06.806,08.377,10.471,12.042,12.566,12.566,13.089,13.613,13.613,13.613,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,15.184,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,13.613,14.137,14.137,14.137,14.137,14.137,13.613,14.137,14.137,13.613,15.184,13.613,14.137,14.137,13.613,14.137,14.137,13.613,14.137,14.137,14.137,13.613,14.137,14.137,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,13.613,14.137,13.613,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,13.613,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,14.137,13.613,15.184,13.613,14.137,14.137,13.613,14.137,14.137,14.137,14.137,14.137,14.137,14.137,14.137,13.613,13.613,14.137,14.137,13.613,14.137,14.137,14.137,13.613,14.137,14.137]
t = np.linspace(0,1.49,150)

print("Tamanho do vetor de tempo: ")
print(np.size(t))
print("Passo de tempo do vetor: ")
dt = np.diff(t)
print(dt[0])

plt.plot(t,M1_2_79,label='Medido 2,73 V')
plt.plot(t,M1_4_00,label='Medido 4,00 V')
plt.plot(t,M1_5_59,label='Medido 5,50 V')

### Estimativa da função de transferência
K = 2.55
p1 = 10
p2 = 100
Ts = ctrl.tf([K*p1*p2], [ 1,p1+p2,p1*p2])
print("\n Função de transferência da velocidade em rad/s: ")
print(Ts)

respMA_2_79, time = ctrl.step(2.73*Ts, 1.5)
respMA_4_00, time = ctrl.step(4.0*Ts, 1.5)
respMA_5_59, time = ctrl.step(5.5*Ts, 1.5)

plt.plot(time, respMA_2_79, label='Estimado 2,73 V')
plt.plot(time, respMA_4_00, label='Estimado 4,00 V')
plt.plot(time, respMA_5_59, label='Estimado 5,50 V')
plt.xlabel("Tempos [s]")
plt.ylabel("Velocidade [rad/s]")
plt.legend(["Velocidade Medida para 2,73V","Velocidade Medida para 4,0V","Velocidade Medida para 5,50V","Velocidade estimada para 2,73V","Velocidade estimada para 4,0V","Velocidade estimada para 5,50V"])
plt.show()
